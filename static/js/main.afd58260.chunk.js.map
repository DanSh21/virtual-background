{"version":3,"sources":["helpers/backgroundHelper.ts","helpers/thumbnailHelper.ts","hooks/useImageThumbnail.ts","components/SelectionButton.tsx","components/TumbnailButton.tsx","components/ImageButton.tsx","components/SelectionIconButton.tsx","components/BackgroundSelectionCard.tsx","components/PostProcessingConfigCard.tsx","components/SegmentationConfigCard.tsx","helpers/sourceHelper.ts","hooks/useVideoThumbnail.ts","components/VideoButton.tsx","components/SourceSelectionCard.tsx","helpers/segmentationHelper.ts","hooks/useStats.ts","components/OutputViewer.tsx","components/SourceViewer.tsx","components/ViewerCard.tsx","hooks/useBodyPix.ts","hooks/useTFLite.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["backgroundImageUrls","map","imageName","process","getThumbnailBlob","source","originalWidth","originalHeight","sourceSize","Math","min","horizontalShift","verticalShift","canvas","document","createElement","width","height","getContext","drawImage","Promise","resolve","toBlob","blob","useImageThumbnail","imageUrl","useState","thumbnailUrl","setThumbnailUrl","useEffect","image","Image","src","onload","a","naturalWidth","naturalHeight","URL","createObjectURL","revokeObjectURL","useStyles","makeStyles","theme","createStyles","root","padding","minWidth","spacing","marginRight","marginBottom","border","alignItems","transitionProperty","transitionDuration","transitions","duration","shorter","transitionTimingFunction","easing","easeInOut","transform","active","borderColor","palette","primary","main","SelectionButton","props","classes","Button","className","clsx","disabled","onClick","children","scalableContent","margin","borderRadius","shape","objectFit","ThumbnailButton","alt","onLoad","Skeleton","variant","ImageButton","revokeThumbnailUrl","borderWidth","borderStyle","boxSizing","display","justifyContent","SelectionIconButton","flex","BackgroundSelectionCard","Card","CardContent","Typography","gutterBottom","component","background","type","onChange","url","PostProcessingConfigCard","FormControlLabel","label","control","Switch","color","checked","config","smoothSegmentationMask","event","target","breakpoints","only","gridColumnStart","gridRowStart","formControl","marginTop","SegmentationConfigCard","FormControl","InputLabel","Select","value","model","inputResolution","MenuItem","sourceImageUrls","sourceVideoUrls","videoName","useVideoThumbnail","videoUrl","video","onloadedmetadata","currentTime","onseeked","videoWidth","videoHeight","icon","position","bottom","right","common","white","VideoButton","SourceSelectionCard","inputResolutions","useStats","fps","setFps","durations","setDurations","previousTimeRef","useRef","beginTimeRef","durationsRef","eventCount","frameCountRef","beginFrame","useCallback","current","Date","now","addFrameEvent","time","endFrame","render","stats","top","left","textAlign","backgroundColor","OutputViewer","canvasRef","resizingDuration","inferenceDuration","postProcessingDuration","ctx","segmentationConfig","segmentationWidth","segmentationHeight","segmentationPixelCount","segmentationMask","ImageData","segmentationMaskCanvas","renderRequestId","segmentationMaskCtx","shouldRender","sourcePlayback","htmlElement","bodyPix","segmentPerson","segmentation","i","data","putImageData","globalCompositeOperation","filter","postProcessingConfig","requestAnimationFrame","console","log","cancelAnimationFrame","statDetails","round","join","ref","down","overflow","up","borderRightWidth","borderRightStyle","borderRightColor","divider","SourceViewer","sourceUrl","setSourceUrl","isLoading","setLoading","isCameraError","setCameraError","videoRef","undefined","setTimeout","constraint","navigator","mediaDevices","getUserMedia","stream","srcObject","error","getCameraStream","CircularProgress","hidden","fontSize","autoPlay","playsInline","controls","muted","loop","onLoadedData","minHeight","gridColumnEnd","gridRowEnd","noOutput","avatar","ViewerCard","setSourcePlayback","Paper","Avatar","useBodyPix","bodyPixNeuralNetwork","setBodyPixNeuralNetwork","tf","loadBodyPix","useTFLite","createTFLiteModule","tfliteModule","fetch","lightModelResponse","arrayBuffer","lightModel","byteLength","fullModelResponse","fullModel","modelBufferOffset","_getModelBufferMemoryOffset","HEAPU8","set","Uint8Array","_loadModel","_getInputMemoryOffset","_getInputHeight","_getInputWidth","_getInputChannelCount","_getOutputMemoryOffset","_getOutputHeight","_getOutputWidth","_getOutputChannelCount","start","inferenceResult","_runInference","loadTFLite","gap","gridTemplateColumns","resourceSelectionCards","flexDirection","App","setSource","setBackground","setSegmentationConfig","setPostProcessingConfig","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","CssBaseline","getElementById"],"mappings":"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","file":"static/js/main.afd58260.chunk.js","sourcesContent":["export type Background = {\n  type: 'none' | 'blur' | 'image'\n  url?: string\n}\n\nexport const backgroundImageUrls = [\n  'architecture-5082700_1280',\n  'porch-691330_1280',\n  'saxon-switzerland-539418_1280',\n  'shibuyasky-4768679_1280',\n].map((imageName) => `${process.env.PUBLIC_URL}/backgrounds/${imageName}.jpg`)\n","/**\n * Returns a thumbnail as a Blob.\n * @param source The source image or video.\n * @param originalWidth The original width of the source before sizing.\n * @param originalHeight The original height of the source before sizing.\n */\nexport function getThumbnailBlob(\n  source: HTMLImageElement | HTMLVideoElement,\n  originalWidth: number,\n  originalHeight: number\n) {\n  const sourceSize = Math.min(originalWidth, originalHeight)\n  const horizontalShift = (originalWidth - sourceSize) / 2\n  const verticalShift = (originalHeight - sourceSize) / 2\n\n  const canvas = document.createElement('canvas')\n  canvas.width = 63\n  canvas.height = 63\n  const ctx = canvas.getContext('2d')!\n  ctx.drawImage(\n    source,\n    horizontalShift,\n    verticalShift,\n    sourceSize,\n    sourceSize,\n    0,\n    0,\n    canvas.width,\n    canvas.height\n  )\n\n  return new Promise<Blob | null>((resolve) =>\n    canvas.toBlob((blob) => resolve(blob))\n  )\n}\n","import { useEffect, useState } from 'react'\nimport { getThumbnailBlob } from '../helpers/thumbnailHelper'\n\n/**\n * Returns an image thumbnail URL and a function to revoke it.\n */\nfunction useImageThumbnail(imageUrl: string): [string | undefined, () => void] {\n  const [thumbnailUrl, setThumbnailUrl] = useState<string>()\n\n  useEffect(() => {\n    const image = new Image()\n    image.src = imageUrl\n    image.onload = async () => {\n      const blob = await getThumbnailBlob(\n        image,\n        image.naturalWidth,\n        image.naturalHeight\n      )\n      setThumbnailUrl(URL.createObjectURL(blob))\n    }\n  }, [imageUrl])\n\n  return [thumbnailUrl, () => URL.revokeObjectURL(thumbnailUrl!)]\n}\n\nexport default useImageThumbnail\n","import Button from '@material-ui/core/Button'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport clsx from 'clsx'\n\ntype SelectionButtonProps = {\n  active: boolean\n  disabled?: boolean\n  children: React.ReactNode\n  onClick: () => void\n}\n\nfunction SelectionButton(props: SelectionButtonProps) {\n  const classes = useStyles()\n\n  return (\n    <Button\n      className={clsx(classes.root, props.active && classes.active)}\n      disabled={props.disabled}\n      onClick={props.onClick}\n    >\n      {props.children}\n    </Button>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: 0,\n      minWidth: theme.spacing(7) + 2,\n      height: theme.spacing(7) + 2,\n      width: theme.spacing(7) + 2,\n      marginRight: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      border: '2px solid transparent',\n      alignItems: 'stretch',\n      transitionProperty: 'transform, border-color',\n      transitionDuration: `${theme.transitions.duration.shorter}ms`,\n      transitionTimingFunction: theme.transitions.easing.easeInOut,\n\n      '&:hover': {\n        transform: 'scale(1.125)',\n      },\n    },\n    active: {\n      borderColor: theme.palette.primary.main,\n      transform: 'scale(1.125)',\n    },\n  })\n)\n\nexport default SelectionButton\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport Skeleton from '@material-ui/lab/Skeleton'\nimport clsx from 'clsx'\nimport SelectionButton from './SelectionButton'\n\ntype ThumbnailButtonProps = {\n  thumbnailUrl?: string\n  active: boolean\n  children?: React.ReactNode\n  onClick: () => void\n  onLoad?: () => void\n}\n\nfunction ThumbnailButton(props: ThumbnailButtonProps) {\n  const classes = useStyles()\n\n  return (\n    <SelectionButton\n      active={!!props.thumbnailUrl && props.active}\n      disabled={!props.thumbnailUrl}\n      onClick={props.onClick}\n    >\n      {props.thumbnailUrl ? (\n        <img\n          className={clsx(classes.scalableContent, classes.image)}\n          src={props.thumbnailUrl}\n          alt=\"\"\n          onLoad={props.onLoad}\n        />\n      ) : (\n        <Skeleton className={classes.scalableContent} variant=\"rect\" />\n      )}\n      {props.children}\n    </SelectionButton>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    scalableContent: {\n      // Fixes rendering issues with border when scaled\n      width: 'calc(100% + 2px)',\n      height: 'calc(100% + 2px)',\n      margin: -1,\n      borderRadius: theme.shape.borderRadius,\n    },\n    image: {\n      objectFit: 'cover',\n    },\n  })\n)\n\nexport default ThumbnailButton\n","import useImageThumbnail from '../hooks/useImageThumbnail'\nimport ThumbnailButton from './TumbnailButton'\n\ntype ImageButtonProps = {\n  imageUrl: string\n  active: boolean\n  onClick: () => void\n}\n\nfunction ImageButton(props: ImageButtonProps) {\n  const [thumbnailUrl, revokeThumbnailUrl] = useImageThumbnail(props.imageUrl)\n\n  return (\n    <ThumbnailButton\n      thumbnailUrl={thumbnailUrl}\n      active={props.active}\n      onClick={props.onClick}\n      onLoad={revokeThumbnailUrl}\n    />\n  )\n}\n\nexport default ImageButton\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport SelectionButton from './SelectionButton'\n\ntype SelectionIconButtonProps = {\n  active: boolean\n  children: React.ReactNode\n  onClick: () => void\n}\n\nfunction SelectionIconButton(props: SelectionIconButtonProps) {\n  const classes = useStyles()\n\n  return (\n    <SelectionButton active={props.active} onClick={props.onClick}>\n      <div className={classes.root}>{props.children}</div>\n    </SelectionButton>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      height: '100%',\n      borderWidth: 1,\n      borderStyle: 'solid',\n      borderColor: 'rgba(0, 0, 0, 0.23)',\n      borderRadius: theme.shape.borderRadius,\n      margin: -1,\n      boxSizing: 'content-box',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n  })\n)\n\nexport default SelectionIconButton\n","import Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport BlockIcon from '@material-ui/icons/Block'\nimport BlurOnIcon from '@material-ui/icons/BlurOn'\nimport { Background, backgroundImageUrls } from '../helpers/backgroundHelper'\nimport ImageButton from './ImageButton'\nimport SelectionIconButton from './SelectionIconButton'\n\ntype BackgroundSelectionCardProps = {\n  background: Background\n  onChange: (background: Background) => void\n}\n\nfunction BackgroundSelectionCard(props: BackgroundSelectionCardProps) {\n  const classes = useStyles()\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n          Background\n        </Typography>\n        <SelectionIconButton\n          active={props.background.type === 'none'}\n          onClick={() => props.onChange({ type: 'none' })}\n        >\n          <BlockIcon />\n        </SelectionIconButton>\n        <SelectionIconButton\n          active={props.background.type === 'blur'}\n          onClick={() => props.onChange({ type: 'blur' })}\n        >\n          <BlurOnIcon />\n        </SelectionIconButton>\n        {backgroundImageUrls.map((imageUrl) => (\n          <ImageButton\n            key={imageUrl}\n            imageUrl={imageUrl}\n            active={imageUrl === props.background.url}\n            onClick={() => props.onChange({ type: 'image', url: imageUrl })}\n          />\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flex: 1,\n    },\n  })\n)\n\nexport default BackgroundSelectionCard\n","import Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport Typography from '@material-ui/core/Typography'\nimport { PostProcessingConfig } from '../helpers/postProcessingHelper'\n\ntype PostProcessingConfigCardProps = {\n  config: PostProcessingConfig\n  onChange: (postProcessingConfig: PostProcessingConfig) => void\n}\n\nfunction PostProcessingConfigCard(props: PostProcessingConfigCardProps) {\n  return (\n    <Card>\n      <CardContent>\n        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n          Post-processing\n        </Typography>\n        <FormControlLabel\n          label=\"Smooth segmentation mask\"\n          control={\n            <Switch\n              color=\"primary\"\n              checked={props.config.smoothSegmentationMask}\n              onChange={(event) => {\n                props.onChange({ smoothSegmentationMask: event.target.checked })\n              }}\n            />\n          }\n        />\n      </CardContent>\n    </Card>\n  )\n}\n\nexport default PostProcessingConfigCard\n","import Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Select from '@material-ui/core/Select'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport { ChangeEvent } from 'react'\nimport {\n  InputResolution,\n  SegmentationConfig,\n  SegmentationModel,\n} from '../helpers/segmentationHelper'\n\ntype SegmentationConfigCardProps = {\n  config: SegmentationConfig\n  onChange: (segmentationConfig: SegmentationConfig) => void\n}\n\nfunction SegmentationConfigCard(props: SegmentationConfigCardProps) {\n  const classes = useStyles()\n\n  function handleModelChange(event: ChangeEvent<{ value: unknown }>) {\n    const model = event.target.value as SegmentationModel\n    let inputResolution = props.config.inputResolution\n    if (model === 'meet' && inputResolution === '360p') {\n      inputResolution = '144p'\n    }\n    props.onChange({ ...props.config, model, inputResolution })\n  }\n\n  function handleInputResolutionChange(event: ChangeEvent<{ value: unknown }>) {\n    props.onChange({\n      ...props.config,\n      inputResolution: event.target.value as InputResolution,\n    })\n  }\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n          Segmentation\n        </Typography>\n        <FormControl className={classes.formControl} variant=\"outlined\">\n          <InputLabel>Model</InputLabel>\n          <Select\n            label=\"Model\"\n            value={props.config.model}\n            onChange={handleModelChange}\n          >\n            <MenuItem value={'bodyPix'}>BodyPix</MenuItem>\n            <MenuItem value={'meet'}>Meet (WIP)</MenuItem>\n          </Select>\n        </FormControl>\n        <FormControl className={classes.formControl} variant=\"outlined\">\n          <InputLabel>Input resolution</InputLabel>\n          <Select\n            label=\"Input resolution\"\n            value={props.config.inputResolution}\n            onChange={handleInputResolutionChange}\n          >\n            <MenuItem value={'360p'} disabled={props.config.model === 'meet'}>\n              360p\n            </MenuItem>\n            <MenuItem value={'144p'}>144p</MenuItem>\n            <MenuItem value={'96p'}>96p</MenuItem>\n          </Select>\n        </FormControl>\n      </CardContent>\n    </Card>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      [theme.breakpoints.only('md')]: {\n        gridColumnStart: 2,\n        gridRowStart: 2,\n      },\n    },\n    formControl: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1),\n      marginRight: theme.spacing(2),\n      minWidth: 120,\n    },\n  })\n)\n\nexport default SegmentationConfigCard\n","export type Source = {\n  type: 'image' | 'video' | 'camera'\n  url?: string\n}\n\nexport type SourcePlayback = {\n  htmlElement: HTMLImageElement | HTMLVideoElement\n  width: number\n  height: number\n}\n\nexport const sourceImageUrls = [\n  'girl-919048_1280',\n  'doctor-5871743_640',\n  'woman-5883428_1280',\n].map((imageName) => `${process.env.PUBLIC_URL}/images/${imageName}.jpg`)\n\nexport const sourceVideoUrls = [\n  'Dance - 32938',\n  'Doctor - 26732',\n  'Thoughtful - 35590',\n].map((videoName) => `${process.env.PUBLIC_URL}/videos/${videoName}.mp4`)\n","import { useEffect, useState } from 'react'\nimport { getThumbnailBlob } from '../helpers/thumbnailHelper'\n\n/**\n * Returns a video thumbnail URL and a function to revoke it.\n */\nfunction useVideoThumbnail(videoUrl: string): [string | undefined, () => void] {\n  const [thumbnailUrl, setThumbnailUrl] = useState<string>()\n\n  useEffect(() => {\n    const video = document.createElement('video')\n    video.src = videoUrl\n    video.onloadedmetadata = () => {\n      video.currentTime = video.duration / 2\n    }\n    video.onseeked = async () => {\n      const blob = await getThumbnailBlob(\n        video,\n        video.videoWidth,\n        video.videoHeight\n      )\n      setThumbnailUrl(URL.createObjectURL(blob))\n    }\n  }, [videoUrl])\n\n  return [thumbnailUrl, () => URL.revokeObjectURL(thumbnailUrl!)]\n}\n\nexport default useVideoThumbnail\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline'\nimport useVideoThumbnail from '../hooks/useVideoThumbnail'\nimport ThumbnailButton from './TumbnailButton'\n\ntype VideoButtonProps = {\n  videoUrl: string\n  active: boolean\n  onClick: () => void\n}\n\nfunction VideoButton(props: VideoButtonProps) {\n  const classes = useStyles()\n  const [thumbnailUrl, revokeThumbnailUrl] = useVideoThumbnail(props.videoUrl)\n\n  return (\n    <ThumbnailButton\n      thumbnailUrl={thumbnailUrl}\n      active={props.active}\n      onClick={props.onClick}\n      onLoad={revokeThumbnailUrl}\n    >\n      <PlayCircleOutlineIcon className={classes.icon} />\n    </ThumbnailButton>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    icon: {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      color: theme.palette.common.white,\n    },\n  })\n)\n\nexport default VideoButton\n","import Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport VideocamIcon from '@material-ui/icons/Videocam'\nimport {\n  Source,\n  sourceImageUrls,\n  sourceVideoUrls,\n} from '../helpers/sourceHelper'\nimport ImageButton from './ImageButton'\nimport SelectionIconButton from './SelectionIconButton'\nimport VideoButton from './VideoButton'\n\ntype SourceSelectionCardProps = {\n  source: Source\n  onChange: (source: Source) => void\n}\n\nfunction SourceSelectionCard(props: SourceSelectionCardProps) {\n  const classes = useStyles()\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <Typography gutterBottom variant=\"h6\" component=\"h2\">\n          Source\n        </Typography>\n        <SelectionIconButton\n          active={props.source.type === 'camera'}\n          onClick={() => props.onChange({ type: 'camera' })}\n        >\n          <VideocamIcon />\n        </SelectionIconButton>\n        {sourceImageUrls.map((imageUrl) => (\n          <ImageButton\n            key={imageUrl}\n            imageUrl={imageUrl}\n            active={imageUrl === props.source.url}\n            onClick={() => props.onChange({ type: 'image', url: imageUrl })}\n          />\n        ))}\n        {sourceVideoUrls.map((videoUrl) => (\n          <VideoButton\n            key={videoUrl}\n            videoUrl={videoUrl}\n            active={videoUrl === props.source.url}\n            onClick={() => props.onChange({ type: 'video', url: videoUrl })}\n          />\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flex: 1,\n    },\n  })\n)\n\nexport default SourceSelectionCard\n","export type SegmentationModel = 'bodyPix' | 'meet'\n\nexport type InputResolution = '360p' | '144p' | '96p'\n\nexport const inputResolutions: {\n  [resolution in InputResolution]: [number, number]\n} = {\n  '360p': [640, 360],\n  '144p': [256, 144],\n  '96p': [160, 96],\n}\n\nexport type SegmentationConfig = {\n  model: SegmentationModel\n  inputResolution: InputResolution\n}\n","import { useCallback, useRef, useState } from 'react'\n\nfunction useStats() {\n  const [fps, setFps] = useState(0)\n  const [durations, setDurations] = useState<number[]>([])\n  const previousTimeRef = useRef(0)\n  const beginTimeRef = useRef(0)\n  const durationsRef = useRef<number[]>([])\n  const eventCount = useRef(0)\n  const frameCountRef = useRef(0)\n\n  // The useCallbacks below are required to prevent infinite loop\n  // when the functions are called inside useEffect\n\n  const beginFrame = useCallback(() => {\n    beginTimeRef.current = Date.now()\n  }, [])\n\n  const addFrameEvent = useCallback(() => {\n    const time = Date.now()\n    durationsRef.current[eventCount.current] = time - beginTimeRef.current\n    beginTimeRef.current = time\n    eventCount.current++\n  }, [])\n\n  const endFrame = useCallback(() => {\n    const time = Date.now()\n    durationsRef.current[eventCount.current] = time - beginTimeRef.current\n    frameCountRef.current++\n    if (time >= previousTimeRef.current + 1000) {\n      setFps((frameCountRef.current * 1000) / (time - previousTimeRef.current))\n      setDurations(durationsRef.current)\n      previousTimeRef.current = time\n      frameCountRef.current = 0\n    }\n    eventCount.current = 0\n  }, [])\n\n  return { fps, durations, beginFrame, addFrameEvent, endFrame }\n}\n\nexport default useStats\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport Typography from '@material-ui/core/Typography'\nimport { BodyPix } from '@tensorflow-models/body-pix'\nimport React, { useEffect, useRef } from 'react'\nimport { Background } from '../helpers/backgroundHelper'\nimport { PostProcessingConfig } from '../helpers/postProcessingHelper'\nimport {\n  inputResolutions,\n  SegmentationConfig,\n} from '../helpers/segmentationHelper'\nimport { SourcePlayback } from '../helpers/sourceHelper'\nimport useStats from '../hooks/useStats'\n\ntype OutputViewerProps = {\n  sourcePlayback: SourcePlayback\n  background: Background\n  bodyPix: BodyPix\n  segmentationConfig: SegmentationConfig\n  postProcessingConfig: PostProcessingConfig\n}\n\nfunction OutputViewer(props: OutputViewerProps) {\n  const classes = useStyles()\n  const canvasRef = useRef<HTMLCanvasElement>(null!)\n  const {\n    fps,\n    durations: [resizingDuration, inferenceDuration, postProcessingDuration],\n    beginFrame,\n    addFrameEvent,\n    endFrame,\n  } = useStats()\n\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext('2d')!\n\n    const [segmentationWidth, segmentationHeight] = inputResolutions[\n      props.segmentationConfig.inputResolution\n    ]\n    const segmentationPixelCount = segmentationWidth * segmentationHeight\n    const segmentationMask = new ImageData(\n      segmentationWidth,\n      segmentationHeight\n    )\n    const segmentationMaskCanvas = document.createElement('canvas')\n    segmentationMaskCanvas.width = segmentationWidth\n    segmentationMaskCanvas.height = segmentationHeight\n    const segmentationMaskCtx = segmentationMaskCanvas.getContext('2d')!\n\n    // The useEffect cleanup function is not enough to stop\n    // the rendering loop when the framerate is low\n    let shouldRender = true\n\n    let renderRequestId: number\n\n    async function render() {\n      if (!shouldRender) {\n        return\n      }\n\n      beginFrame()\n\n      if (props.background.type !== 'none') {\n        segmentationMaskCtx.drawImage(\n          props.sourcePlayback.htmlElement,\n          0,\n          0,\n          props.sourcePlayback.width,\n          props.sourcePlayback.height,\n          0,\n          0,\n          segmentationWidth,\n          segmentationHeight\n        )\n      }\n\n      addFrameEvent()\n\n      if (\n        props.background.type !== 'none' &&\n        props.segmentationConfig.model === 'bodyPix'\n      ) {\n        const segmentation = await props.bodyPix.segmentPerson(\n          segmentationMaskCanvas\n        )\n        for (let i = 0; i < segmentationPixelCount; i++) {\n          // Sets only the alpha component of each pixel\n          segmentationMask.data[i * 4 + 3] = segmentation.data[i] ? 255 : 0\n        }\n        segmentationMaskCtx.putImageData(segmentationMask, 0, 0)\n      }\n\n      addFrameEvent()\n\n      ctx.globalCompositeOperation = 'copy'\n      ctx.filter = 'none'\n\n      if (props.postProcessingConfig.smoothSegmentationMask) {\n        if (props.background.type === 'blur') {\n          ctx.filter = 'blur(8px)' // FIXME Does not work on Safari\n        } else if (props.background.type === 'image') {\n          ctx.filter = 'blur(2px)' // FIXME Does not work on Safari\n        }\n      }\n\n      if (props.background.type !== 'none') {\n        ctx.drawImage(\n          segmentationMaskCanvas,\n          0,\n          0,\n          segmentationWidth,\n          segmentationHeight,\n          0,\n          0,\n          props.sourcePlayback.width,\n          props.sourcePlayback.height\n        )\n        ctx.globalCompositeOperation = 'source-in'\n        ctx.filter = 'none'\n      }\n\n      ctx.drawImage(props.sourcePlayback.htmlElement, 0, 0)\n\n      if (props.background.type === 'blur') {\n        ctx.globalCompositeOperation = 'destination-over'\n        ctx.filter = 'blur(8px)' // FIXME Does not work on Safari\n        ctx.drawImage(props.sourcePlayback.htmlElement, 0, 0)\n      }\n\n      endFrame()\n      renderRequestId = requestAnimationFrame(render)\n    }\n\n    render()\n    console.log(\n      'Animation started:',\n      props.sourcePlayback,\n      props.background,\n      props.postProcessingConfig\n    )\n\n    return () => {\n      shouldRender = false\n      cancelAnimationFrame(renderRequestId)\n      console.log(\n        'Animation stopped:',\n        props.sourcePlayback,\n        props.background,\n        props.postProcessingConfig\n      )\n    }\n  }, [\n    props.sourcePlayback,\n    props.background,\n    props.bodyPix,\n    props.segmentationConfig,\n    props.postProcessingConfig,\n    beginFrame,\n    addFrameEvent,\n    endFrame,\n  ])\n\n  const statDetails = [\n    `resizing ${resizingDuration}ms`,\n    `inference ${inferenceDuration}ms`,\n    `post-processing ${postProcessingDuration}ms`,\n  ]\n  const stats = `${Math.round(fps)} fps (${statDetails.join(', ')})`\n\n  return (\n    <div className={classes.root}>\n      {props.background.type === 'image' && (\n        <img className={classes.render} src={props.background.url} alt=\"\" />\n      )}\n      <canvas\n        ref={canvasRef}\n        className={classes.render}\n        width={props.sourcePlayback.width}\n        height={props.sourcePlayback.height}\n      />\n      <Typography className={classes.stats} variant=\"caption\">\n        {stats}\n      </Typography>\n    </div>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flex: 1,\n      position: 'relative',\n    },\n    render: {\n      position: 'absolute',\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover',\n    },\n    stats: {\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      left: 0,\n      textAlign: 'center',\n      backgroundColor: 'rgba(0, 0, 0, 0.48)',\n      color: theme.palette.common.white,\n    },\n  })\n)\n\nexport default OutputViewer\n","import CircularProgress from '@material-ui/core/CircularProgress'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\nimport React, { SyntheticEvent, useEffect, useRef, useState } from 'react'\nimport { Source, SourcePlayback } from '../helpers/sourceHelper'\n\ntype SourceViewerProps = {\n  source: Source\n  onLoad: (sourcePlayback: SourcePlayback) => void\n}\n\nfunction SourceViewer(props: SourceViewerProps) {\n  const classes = useStyles()\n  const [sourceUrl, setSourceUrl] = useState<string>()\n  const [isLoading, setLoading] = useState(false)\n  const [isCameraError, setCameraError] = useState(false)\n  const videoRef = useRef<HTMLVideoElement>(null)\n\n  useEffect(() => {\n    setSourceUrl(undefined)\n    setLoading(true)\n    setCameraError(false)\n\n    // Enforces reloading the resource, otherwise\n    // onLoad event is not always dispatched and the\n    // progress indicator never disappears\n    setTimeout(() => setSourceUrl(props.source.url))\n  }, [props.source])\n\n  useEffect(() => {\n    async function getCameraStream() {\n      try {\n        const constraint = { video: true }\n        const stream = await navigator.mediaDevices.getUserMedia(constraint)\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream\n          return\n        }\n      } catch (error) {\n        console.error('Error opening video camera.', error)\n      }\n      setLoading(false)\n      setCameraError(true)\n    }\n\n    if (props.source.type === 'camera') {\n      getCameraStream()\n    } else if (videoRef.current) {\n      videoRef.current.srcObject = null\n    }\n  }, [props.source])\n\n  function handleImageLoad(event: SyntheticEvent) {\n    const image = event.target as HTMLImageElement\n    props.onLoad({\n      htmlElement: image,\n      width: image.naturalWidth,\n      height: image.naturalHeight,\n    })\n    setLoading(false)\n  }\n\n  function handleVideoLoad(event: SyntheticEvent) {\n    const video = event.target as HTMLVideoElement\n    props.onLoad({\n      htmlElement: video,\n      width: video.videoWidth,\n      height: video.videoHeight,\n    })\n    setLoading(false)\n  }\n\n  return (\n    <div className={classes.root}>\n      {isLoading && <CircularProgress />}\n      {props.source.type === 'image' ? (\n        <img\n          className={classes.sourcePlayback}\n          src={sourceUrl}\n          hidden={isLoading}\n          alt=\"\"\n          onLoad={handleImageLoad}\n        />\n      ) : isCameraError ? (\n        <VideocamOffIcon fontSize=\"large\" />\n      ) : (\n        <video\n          ref={videoRef}\n          className={classes.sourcePlayback}\n          src={sourceUrl}\n          hidden={isLoading}\n          autoPlay\n          playsInline\n          controls={false}\n          muted\n          loop\n          onLoadedData={handleVideoLoad}\n        />\n      )}\n    </div>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      position: 'relative',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n\n      [theme.breakpoints.down('xs')]: {\n        width: 0,\n        overflow: 'hidden',\n      },\n\n      [theme.breakpoints.up('sm')]: {\n        flex: 1,\n        borderRightWidth: 1,\n        borderRightStyle: 'solid',\n        borderRightColor: theme.palette.divider,\n      },\n    },\n    sourcePlayback: {\n      position: 'absolute',\n      width: '100%',\n      height: '100%',\n      objectFit: 'cover',\n    },\n  })\n)\n\nexport default SourceViewer\n","import Avatar from '@material-ui/core/Avatar'\nimport Paper from '@material-ui/core/Paper'\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport { BodyPix } from '@tensorflow-models/body-pix'\nimport { useEffect, useState } from 'react'\nimport { Background } from '../helpers/backgroundHelper'\nimport { PostProcessingConfig } from '../helpers/postProcessingHelper'\nimport { SegmentationConfig } from '../helpers/segmentationHelper'\nimport { Source, SourcePlayback } from '../helpers/sourceHelper'\nimport OutputViewer from './OutputViewer'\nimport SourceViewer from './SourceViewer'\n\ntype ViewerCardProps = {\n  source: Source\n  background: Background\n  bodyPix?: BodyPix\n  segmentationConfig: SegmentationConfig\n  postProcessingConfig: PostProcessingConfig\n}\n\nfunction ViewerCard(props: ViewerCardProps) {\n  const classes = useStyles()\n  const [sourcePlayback, setSourcePlayback] = useState<SourcePlayback>()\n\n  useEffect(() => {\n    setSourcePlayback(undefined)\n  }, [props.source])\n\n  return (\n    <Paper className={classes.root}>\n      <SourceViewer source={props.source} onLoad={setSourcePlayback} />\n      {sourcePlayback && props.bodyPix ? (\n        <OutputViewer\n          sourcePlayback={sourcePlayback}\n          background={props.background}\n          bodyPix={props.bodyPix}\n          segmentationConfig={props.segmentationConfig}\n          postProcessingConfig={props.postProcessingConfig}\n        />\n      ) : (\n        <div className={classes.noOutput}>\n          <Avatar className={classes.avatar} />\n        </div>\n      )}\n    </Paper>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) => {\n  const minHeight = [`${theme.spacing(52)}px`, `100vh - ${theme.spacing(2)}px`]\n\n  return createStyles({\n    root: {\n      minHeight: `calc(min(${minHeight.join(', ')}))`,\n      display: 'flex',\n      overflow: 'hidden',\n\n      [theme.breakpoints.up('md')]: {\n        gridColumnStart: 1,\n        gridColumnEnd: 3,\n      },\n\n      [theme.breakpoints.up('lg')]: {\n        gridRowStart: 1,\n        gridRowEnd: 3,\n      },\n    },\n    noOutput: {\n      flex: 1,\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    avatar: {\n      width: theme.spacing(20),\n      height: theme.spacing(20),\n    },\n  })\n})\n\nexport default ViewerCard\n","import * as bodyPix from '@tensorflow-models/body-pix'\nimport * as tf from '@tensorflow/tfjs'\nimport { useEffect, useState } from 'react'\n\nfunction useBodyPix() {\n  const [\n    bodyPixNeuralNetwork,\n    setBodyPixNeuralNetwork,\n  ] = useState<bodyPix.BodyPix>()\n\n  useEffect(() => {\n    async function loadBodyPix() {\n      console.log('Loading TensorFlow.js and BodyPix segmentation model')\n      await tf.ready()\n      setBodyPixNeuralNetwork(await bodyPix.load())\n      console.log('TensorFlow.js and BodyPix loaded')\n    }\n\n    loadBodyPix()\n  }, [])\n\n  return bodyPixNeuralNetwork\n}\n\nexport default useBodyPix\n","import { useEffect } from 'react'\n\ndeclare function createTFLiteModule(): Promise<TFLiteModule>\n\ninterface TFLiteModule extends EmscriptenModule {\n  _getModelBufferMemoryOffset(): number\n  _getInputMemoryOffset(): number\n  _getInputHeight(): number\n  _getInputWidth(): number\n  _getInputChannelCount(): number\n  _getOutputMemoryOffset(): number\n  _getOutputHeight(): number\n  _getOutputWidth(): number\n  _getOutputChannelCount(): number\n  _loadModel(bufferSize: number): number\n  _runInference(): number\n}\n\nfunction useTFLite() {\n  useEffect(() => {\n    async function loadTFLite() {\n      // TODO Fetch every resources in parallel\n      // TODO Load full or light model depending on the environment\n      // TODO Detect WASM features to handle SIMD and multithreading\n      const tfliteModule = await createTFLiteModule()\n      const lightModelResponse = await fetch(\n        `${process.env.PUBLIC_URL}/models/segm_lite_v681.tflite`\n      )\n      const lightModel = await lightModelResponse.arrayBuffer()\n      console.log('Lite model buffer size:', lightModel.byteLength)\n\n      const fullModelResponse = await fetch(\n        `${process.env.PUBLIC_URL}/models/segm_full_v679.tflite`\n      )\n      const fullModel = await fullModelResponse.arrayBuffer()\n      console.log('Full model buffer size:', fullModel.byteLength)\n\n      const modelBufferOffset = tfliteModule._getModelBufferMemoryOffset()\n      console.log('Model buffer memory offset:', modelBufferOffset)\n      console.log('Loading light model buffer...')\n      tfliteModule.HEAPU8.set(new Uint8Array(lightModel), modelBufferOffset)\n      console.log(\n        '_loadModel result:',\n        tfliteModule._loadModel(lightModel.byteLength)\n      )\n\n      console.log('Input memory offset:', tfliteModule._getInputMemoryOffset())\n      console.log('Input height:', tfliteModule._getInputHeight())\n      console.log('Input width:', tfliteModule._getInputWidth())\n      console.log('Input channels:', tfliteModule._getInputChannelCount())\n\n      console.log(\n        'Output memory offset:',\n        tfliteModule._getOutputMemoryOffset()\n      )\n      console.log('Output height:', tfliteModule._getOutputHeight())\n      console.log('Output width:', tfliteModule._getOutputWidth())\n      console.log('Output channels:', tfliteModule._getOutputChannelCount())\n\n      // TODO Move inference to the real-time render loop\n      const start = Date.now()\n      const inferenceResult = tfliteModule._runInference()\n      const inferenceDuration = Date.now() - start\n      console.log(\n        `_runInference result: ${inferenceResult} (${inferenceDuration}ms)`\n      )\n    }\n\n    loadTFLite()\n  }, [])\n}\n\nexport default useTFLite\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles'\nimport { useState } from 'react'\nimport BackgroundSelectionCard from './components/BackgroundSelectionCard'\nimport PostProcessingConfigCard from './components/PostProcessingConfigCard'\nimport SegmentationConfigCard from './components/SegmentationConfigCard'\nimport SourceSelectionCard from './components/SourceSelectionCard'\nimport ViewerCard from './components/ViewerCard'\nimport { Background, backgroundImageUrls } from './helpers/backgroundHelper'\nimport { PostProcessingConfig } from './helpers/postProcessingHelper'\nimport { SegmentationConfig } from './helpers/segmentationHelper'\nimport { Source, sourceImageUrls } from './helpers/sourceHelper'\nimport useBodyPix from './hooks/useBodyPix'\nimport useTFLite from './hooks/useTFLite'\n\nfunction App() {\n  const bodyPix = useBodyPix()\n  useTFLite()\n\n  const classes = useStyles()\n  const [source, setSource] = useState<Source>({\n    type: 'image',\n    url: sourceImageUrls[0],\n  })\n  const [background, setBackground] = useState<Background>({\n    type: 'image',\n    url: backgroundImageUrls[0],\n  })\n  const [\n    segmentationConfig,\n    setSegmentationConfig,\n  ] = useState<SegmentationConfig>({\n    model: 'bodyPix',\n    inputResolution: '360p',\n  })\n  const [\n    postProcessingConfig,\n    setPostProcessingConfig,\n  ] = useState<PostProcessingConfig>({ smoothSegmentationMask: true })\n\n  return (\n    <div className={classes.root}>\n      <ViewerCard\n        source={source}\n        background={background}\n        bodyPix={bodyPix}\n        segmentationConfig={segmentationConfig}\n        postProcessingConfig={postProcessingConfig}\n      />\n      <SourceSelectionCard source={source} onChange={setSource} />\n      <BackgroundSelectionCard\n        background={background}\n        onChange={setBackground}\n      />\n      <SegmentationConfigCard\n        config={segmentationConfig}\n        onChange={setSegmentationConfig}\n      />\n      <PostProcessingConfigCard\n        config={postProcessingConfig}\n        onChange={setPostProcessingConfig}\n      />\n    </div>\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'grid',\n\n      [theme.breakpoints.up('xs')]: {\n        margin: theme.spacing(1),\n        gap: theme.spacing(1),\n        gridTemplateColumns: '1fr',\n      },\n\n      [theme.breakpoints.up('md')]: {\n        margin: theme.spacing(2),\n        gap: theme.spacing(2),\n        gridTemplateColumns: 'repeat(2, 1fr)',\n      },\n\n      [theme.breakpoints.up('lg')]: {\n        gridTemplateColumns: 'repeat(3, 1fr)',\n      },\n    },\n    resourceSelectionCards: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n  })\n)\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import CssBaseline from '@material-ui/core/CssBaseline'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <CssBaseline />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}